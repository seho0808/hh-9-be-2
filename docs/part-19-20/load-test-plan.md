## 부하 테스트 계획

- 6, 7주차 때 k6로 인기 상품 조회와 쿠폰 발급 쪽은 테스팅을 이미 마쳤습니다.
- 지금 남은 부분은 실제로 주문을 했을 때 TPS를 얼마나 처리할 수 있는지입니다.
- 핵심 병목은 재고 예약과 재고 확정이 얼마나 잘 처리되는지일 것 같습니다.
- 단일 인기 상품 주문에 대하여 빠른 램핑 테스트를 통해 최대 처리 rps를 확인해볼 예정입니다.

### 대상 엔드포인트

- 주문
  - `POST /api/orders` (주문/결제, 멱등키)

### 시나리오

- 각 VU는 가입 => 충전 => 단일 상품 주문으로 진행합니다.

### 부하 모델 (Workload)

- 단일 SKU 지속 가능한 최대 처리량 탐색 (빠른 램핑, ramping-arrival-rate)
  - 목적: 단일 인기 상품 주문의 지속 가능한 최대 처리량(RPS) 빠르게 탐색
  - 케이스 1
    - 20 rps(10s) → 40 rps(10s) → 80 rps(10s) → 160 rps(5s) → 320 rps(10s) → 160 rps(10s)
  - 케이스 2
    - 케이스 1에서의 임계구간 미세 탐색
  - 케이스 3
    - 케이스 1, 2를 바탕으로 최종 탐색

- 사전 세팅
  - Payload: 단일 인기 상품 1개 품목에 재고 충분하도록 백만개 세팅
  - 인증: VU당 1회 회원가입 후 충전 후 주문
  - 재시도: 클라이언트 재시도 비활성화(멱등키로 중복 방지하되 인위적 재시도는 금지)
  - 관측:
    - 응답 시간 (p95)
    - 실패율 (HTTP 4xx/5xx)
